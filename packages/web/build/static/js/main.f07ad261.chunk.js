(this["webpackJsonp@init/web"]=this["webpackJsonp@init/web"]||[]).push([[0],{198:function(e,a,t){e.exports=t(213)},205:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.validRegisterSchema=a.validLoginSchema=a.validUserSchema=a.registerEmailValidation=a.registerPasswordValidation=a.invalidEmail=a.passwordNotLongEnough=a.emailNotLongEnough=void 0;var n=t(212);a.emailNotLongEnough="email must be at least 3 characters",a.passwordNotLongEnough="password must be at least 3 characters",a.invalidEmail="email must be a valid email",a.registerPasswordValidation=n.string().min(3,a.passwordNotLongEnough).max(255).required(),a.registerEmailValidation=n.string().min(3,a.emailNotLongEnough).max(255).email(a.invalidEmail).required(),a.validUserSchema=n.object().shape({email:a.registerEmailValidation,rememberme:n.boolean().required(),password:a.registerPasswordValidation}),a.validLoginSchema=n.object().shape({email:a.registerEmailValidation,rememberme:n.boolean().required(),password:a.registerPasswordValidation}),a.validRegisterSchema=n.object().shape({email:a.registerEmailValidation,firstName:n.string().min(2).max(255).required(),lastName:n.string().min(2).max(255).required(),password:a.registerPasswordValidation})},213:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(18),l=t.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,c,m,s,u,d,g,p=t(34),h=t(21),b=t(251),E=t(252),f=t(257),v=t(250),w=t(74),y=t(263),j=t(253),N=t(72),O=t.n(N),S=t(216),k=t(29),P=t(69),x=t(172),C=t(19),$=function(e,a){return Object.defineProperty?Object.defineProperty(e,"raw",{value:a}):e.raw=a,e},V=Object(C.a)(o||(o=$(["\nmutation Register($data: RegisterInput!) {\n  register(\n    data: $data\n  ) {\n    id\n  }\n}\n"],["\nmutation Register($data: RegisterInput!) {\n  register(\n    data: $data\n  ) {\n    id\n  }\n}\n"]))),q=Object(C.a)(c||(c=$(["\nmutation Login($email: String!, $password: String!){\n    login(\n      email: $email\n      password: $password\n    ){\n      id\n      lastName\n      firstName\n      email        \n    }\n  }\n"],["\nmutation Login($email: String!, $password: String!){\n    login(\n      email: $email\n      password: $password\n    ){\n      id\n      lastName\n      firstName\n      email        \n    }\n  }\n"]))),L=Object(C.a)(m||(m=$(["\nmutation confirmUser($token: String!){\n  confirmUser(\n    token: $token\n  )\n}"],["\nmutation confirmUser($token: String!){\n  confirmUser(\n    token: $token\n  )\n}"]))),F=Object(C.a)(s||(s=$(["\nmutation logout{\n  logout\n}"],["\nmutation logout{\n  logout\n}"]))),W=Object(C.a)(u||(u=$(["\nmutation forgotPassword($email: String!){\n  forgotPassword(email: $email)\n}\n"],["\nmutation forgotPassword($email: String!){\n  forgotPassword(email: $email)\n}\n"]))),R=Object(C.a)(d||(d=$(["\nmutation changePassword($data: ChangePasswordInput!){\n  changePassword(data: $data){\n    email\n  }\n}"],["\nmutation changePassword($data: ChangePasswordInput!){\n  changePassword(data: $data){\n    email\n  }\n}"]))),A=function(e,a){return Object.defineProperty?Object.defineProperty(e,"raw",{value:a}):e.raw=a,e},B=Object(C.a)(g||(g=A(["\nquery me{\n    me{\n      id\n      lastName\n      firstName\n      name\n      email    \n    }\n  }\n"],["\nquery me{\n    me{\n      id\n      lastName\n      firstName\n      name\n      email    \n    }\n  }\n"]))),I=function(e){var a,t,n=Object(x.a)(q),i=n[0],l=n[1];return(null===(a=l.data)||void 0===a?void 0:a.login.id)?e.callback(!0):null!==l.data&&null!==(null===(t=l.data)||void 0===t?void 0:t.login)||e.callback(!1),r.a.createElement(k.c,{initialValues:{email:"",password:"",rememberme:!1},validationSchema:P.validLoginSchema,onSubmit:function(e){i({variables:{email:e.email,password:e.password}}).catch((function(e){return""}))}},(function(a){var t=a.errors,n=a.touched,r=a.handleChange,i=a.handleBlur,o=a.handleSubmit,c=a.values,m=a.isValid;return e.children({errors:t,touched:n,mutationError:l.error,loading:l.loading,handleChange:r,handleBlur:i,handleSubmit:o,values:c,isValid:m})}))},U=function(e){var a,t=Object(n.useMemo)((function(){return{email:"",firstName:"",lastName:"",password:""}}),[]),i=Object(x.a)(V),l=i[0],o=i[1];return(null===(a=o.data)||void 0===a?void 0:a.register.id)&&(console.log("calling back!"),e.callback()),r.a.createElement(k.c,{validateOnBlur:!0,initialValues:t,validationSchema:P.validRegisterSchema,onSubmit:function(e){l({variables:{data:e}})}},(function(a){var t=a.errors,n=a.touched,r=a.handleChange,i=a.handleBlur,l=a.handleSubmit,c=a.values,m=a.isValid;return e.children({errors:t,touched:n,handleChange:r,handleBlur:i,handleSubmit:l,values:c,isValid:m,loading:o.loading})}))},_=function(e){var a=Object(x.a)(R),t=a[0],i=a[1];return Object(n.useEffect)((function(){e.mutationResult(i)}),[i]),r.a.createElement(k.c,{initialValues:{password:""},validationSchema:P.registerPasswordValidation,onSubmit:function(a){t({variables:{password:a.password,token:e.token}})}},(function(a){var t=a.errors,n=a.touched;return e.children({errors:t,touched:n})}))},z=function(e){var a=Object(x.a)(W),t=a[0],n=a[1];return n.data.forgotPassword&&e.callback&&e.callback(!0),r.a.createElement(k.c,{initialValues:{email:""},validationSchema:P.registerEmailValidation,onSubmit:function(e){t({variables:{email:e.email}})}},(function(a){var t=a.errors,r=a.touched,i=a.handleChange,l=a.handleBlur,o=a.handleSubmit,c=a.values,m=a.isValid;return e.children({errors:t,touched:r,handleChange:i,handleBlur:l,handleSubmit:o,values:c,isValid:m,loading:n.loading,result:n.data})}))},T=t(259),D=function(e){return r.a.createElement(k.a,{name:e.name},(function(a){return r.a.createElement(T.a,Object.assign({},e,a.field,{error:!!a.meta.value&&!!a.meta.error,helperText:a.meta.value?a.meta.error:null}))}))},M=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,null,"Confirmation email sent. Please check your inbox and open the link to confirm your account. "),r.a.createElement(p.b,{to:"/signin"},"Login"))},J=Object(b.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),H=function(){var e=J(),a=Object(n.useState)({registerSuccess:!1}),t=Object(w.a)(a,2),i=t[0],l=t[1];return i.registerSuccess?r.a.createElement(M,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:e.avatar},r.a.createElement(O.a,null)),r.a.createElement(S.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement(U,{callback:function(){return l({registerSuccess:!0})}},(function(){return r.a.createElement(k.b,{className:e.form},r.a.createElement(E.a,{container:!0,spacing:2},r.a.createElement(E.a,{item:!0,xs:12,sm:6},r.a.createElement(D,{autoComplete:"firstname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})),r.a.createElement(E.a,{item:!0,xs:12,sm:6},r.a.createElement(D,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lastname"})),r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(D,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})),r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(D,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r.a.createElement(j.a,{type:"submit",fullWidth:!0,component:"button",variant:"contained",color:"primary",className:e.submit},"Sign Up"),r.a.createElement(E.a,{container:!0,justify:"flex-end"},r.a.createElement(E.a,{item:!0},r.a.createElement(p.b,{to:"/signin"},"Already have an account? Sign in"))))})))},Q=t(254),Y=t(261),G=t(50),K=Object(G.b)({isAuth:!1}),X=Object(b.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),Z=function(){var e=X();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{className:e.avatar},r.a.createElement(O.a,null)),r.a.createElement(S.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(I,{callback:function(e){return function(e){K({isAuth:e})}(e)}},(function(a){a.errors,a.touched;var t=a.mutationError;return r.a.createElement(k.b,{className:e.form},r.a.createElement(D,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),r.a.createElement(D,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),r.a.createElement(S.a,{color:"error"},null===t||void 0===t?void 0:t.message),r.a.createElement(k.a,{name:"rememberme",component:ee}),r.a.createElement(j.a,{type:"submit",fullWidth:!0,component:"button",variant:"contained",color:"primary",className:e.submit},"Sign In"),r.a.createElement(E.a,{container:!0},r.a.createElement(E.a,{item:!0,xs:!0},r.a.createElement(p.b,{to:"/forgot"},"Forgot password?")),r.a.createElement(E.a,{item:!0},r.a.createElement(p.b,{to:"/signup"},"Don't have an account? Sign Up"))))})))},ee=function(e){return r.a.createElement(Q.a,{control:r.a.createElement(Y.a,Object.assign({},e,{onChange:function(a){return e.field.onChange(a)},checked:e.field.value,name:"rememberme",value:"remember",color:"primary"})),label:"Remember me"})},ae=Object(b.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),te=function(){var e=ae();return n.createElement(n.Fragment,null,n.createElement(y.a,{className:e.avatar},n.createElement(O.a,null)),n.createElement(S.a,{component:"h1",variant:"h5"},"Forgot password?"),n.createElement(z,null,(function(){return n.createElement(k.b,{className:e.form},n.createElement(E.a,{container:!0,spacing:2},n.createElement(E.a,{item:!0,xs:12},n.createElement(D,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"}))),n.createElement(j.a,{type:"submit",fullWidth:!0,component:"button",variant:"contained",color:"primary",className:e.submit},"Submit"))})))},ne=t(264),re=t(256),ie=t(262),le=t(260),oe=Object(b.a)((function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),ce=Object(h.g)((function(e){var a=e.match,t=oe(),r=n.useState(null),i=Object(w.a)(r,2),l=i[0],o=i[1];return l.data&&setTimeout((function(){return n.createElement(h.a,{to:"signin"})}),2100),n.createElement(n.Fragment,null,n.createElement(ne.a,{open:l.loading},n.createElement(re.a,{color:"inherit"})),n.createElement(ie.a,{open:l.data,autoHideDuration:2e3},n.createElement(le.a,{severity:"success"},"Password changed successfully.")),n.createElement(y.a,{className:t.avatar},n.createElement(O.a,null)),n.createElement(S.a,{component:"h1",variant:"h5"},"Change password"),n.createElement(_,{token:a.params.token,mutationResult:o},(function(e){e.submitData;return n.createElement(k.b,{className:t.form},n.createElement(E.a,{container:!0,spacing:2},n.createElement(E.a,{item:!0,xs:12},n.createElement(D,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),n.createElement(j.a,{type:"submit",fullWidth:!0,component:"button",variant:"contained",color:"primary",className:t.submit},"Submit"))})))})),me=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,null,"Your account is now confirmed. Now you can access your account "),r.a.createElement(p.b,{to:"/signin"},"Login"))},se=Object(h.g)((function(e){var a,t=e.match,n=Object(x.a)(L),i=Object(w.a)(n,2),l=i[0],o=i[1];return o.called||l({variables:{token:t.params.token}}),(null===(a=o.data)||void 0===a?void 0:a.confirmUser)?r.a.createElement(me,null):r.a.createElement(ne.a,{open:!0},r.a.createElement(re.a,null))})),ue=Object(b.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"}}})),de=function(){var e=ue();return r.a.createElement(E.a,{container:!0,component:"main",className:e.root},r.a.createElement(f.a,null),r.a.createElement(E.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),r.a.createElement(E.a,{item:!0,xs:12,sm:8,md:5,component:v.a,elevation:6,square:!0},r.a.createElement("div",{className:e.paper},r.a.createElement(h.b,{path:"/signup"},r.a.createElement(H,null)),r.a.createElement(h.b,{path:"/signin"},r.a.createElement(Z,null)),r.a.createElement(h.b,{path:"/forgot"},r.a.createElement(te,null)),r.a.createElement(h.b,{path:"/user/change-password/:token"},r.a.createElement(ce,null)),r.a.createElement(h.b,{path:"/user/confirm/:token"},r.a.createElement(se,null)))))},ge=t(258),pe=t(181),he=t.n(pe),be=function(e){var a=Object(x.a)(F),t=Object(w.a)(a,2),n=t[0],r=t[1].data;return(null===r||void 0===r?void 0:r.logout)&&e.callback(),e.children({logout:n,logoutState:r})},Ee=t(171),fe=Object(b.a)((function(e){return{avatar:{margin:e.spacing(2),backgroundColor:e.palette.secondary.main},form:{width:"96%",margin:"10px"},button:{width:"100%"}}})),ve=function(e){var a=fe(),t=Object(Ee.a)(B).data,i=(null===t||void 0===t?void 0:t.me)||{};return r.a.createElement(n.Fragment,null,r.a.createElement(y.a,{className:a.avatar},r.a.createElement(he.a,null)),r.a.createElement(S.a,{component:"h1",variant:"h5"},"Account"),r.a.createElement(E.a,{container:!0,spacing:2,className:a.form},r.a.createElement(E.a,{item:!0,xs:12,sm:6},r.a.createElement(T.a,{variant:"outlined",disabled:!0,label:"First Name",size:"small",style:{width:"100%"},value:i.firstName})),r.a.createElement(E.a,{item:!0,xs:12,sm:6},r.a.createElement(T.a,{variant:"outlined",disabled:!0,label:"Second Name",size:"small",style:{width:"100%"},value:i.lastName})),r.a.createElement(E.a,{item:!0,xs:12},r.a.createElement(T.a,{variant:"outlined",disabled:!0,label:"Email",style:{width:"100%"},size:"small",value:i.email})),r.a.createElement(E.a,{item:!0,sm:6,xs:12},r.a.createElement(j.a,{variant:"contained",color:"primary",size:"medium",className:a.button,disabled:!0},"Edit")),r.a.createElement(E.a,{item:!0,sm:6,xs:12},r.a.createElement(be,{callback:function(){return K({isAuth:!1})}},(function(e){var t=e.logout;return r.a.createElement(j.a,{variant:"contained",color:"secondary",size:"medium",className:a.button,onClick:t},"Logout")})))))},we=Object(b.a)((function(e){return{paper:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)}}})),ye=function(e){var a=we();return r.a.createElement(v.a,{className:a.paper,elevation:4,style:{width:e.width||(e.match?"100vw":"36vw"),height:e.width||(e.match?"100vh":"auto")}},e.children({match:e.match}))},je=t(182);function Ne(){var e=Object(je.a)(["\nquery getUser {\n    user @client{\n        isAuth\n    }\n}\n"]);return Ne=function(){return e},e}var Oe=Object(C.a)(Ne()),Se=function(e){return Object(Ee.a)(Oe).data.user.isAuth?r.a.createElement(h.b,{path:e.path},e.children):r.a.createElement(h.a,{to:"/signin"})},ke=Object(b.a)((function(e){return{image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center",width:"100vw",height:"100vh",position:"absolute",top:0,left:0}}})),Pe=function(e){var a=ke(),t=Object(ge.a)("(min-width: 600px)");return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:a.image}),r.a.createElement(Se,{path:"/account"},r.a.createElement(ye,{match:!t},(function(){return r.a.createElement(ve,null)}))))},xe=function(){var e=Object(Ee.a)(Oe).data.user;return r.a.createElement(p.a,null,r.a.createElement(h.d,null,r.a.createElement(h.b,{path:["/signup","/signin","/forgot","/user/change-password","/user/confirm"]},e.isAuth?r.a.createElement(h.a,{to:"/account"}):r.a.createElement(de,null)),r.a.createElement(h.b,{path:"/"},r.a.createElement(Pe,null))))},Ce=t(170),$e=t(127),Ve=new(t(128).a)({typePolicies:{Query:{fields:{user:{read:function(){return K()}}}}}}),qe=new $e.a({uri:"http://localhost:4000/graphql",cache:Ve});l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ce.a,{client:qe},r.a.createElement(xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},69:function(e,a,t){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,a,t,n){void 0===n&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return a[t]}})}:function(e,a,t,n){void 0===n&&(n=t),e[n]=a[t]}),r=this&&this.__exportStar||function(e,a){for(var t in e)"default"===t||a.hasOwnProperty(t)||n(a,e,t)};Object.defineProperty(a,"__esModule",{value:!0}),r(t(205),a)}},[[198,1,2]]]);
//# sourceMappingURL=main.f07ad261.chunk.js.map